{% extends "base.html" %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="row">

    <!-- Imagem -->
    <div class="col-md-5">
        {% if product.image %}
            <img src="{{ product.image.url }}" class="img-fluid rounded shadow-sm">
        {% else %}
            <div class="bg-light text-center p-5 rounded">
                Sem imagem
            </div>
        {% endif %}
    </div>

    <!-- Informações -->
    <div class="col-md-7">
        <h2>{{ product.name }}</h2>

        <p class="text-muted mb-1">
            Categoria: {{ product.category.name }}
        </p>

        <h3 class="text-success fw-bold mt-3">
            R$ {{ product.price }}
        </h3>

        <p class="mt-3">
            {{ product.description|default:"Sem descrição disponível." }}
        </p>

        <p class="small text-muted">
            <strong>Fornecedores:</strong>
            {% for supplier in product.suppliers.all %}
                {{ supplier.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>

        <div class="mt-4 d-flex gap-2">
            <form method="post" action="{% url 'cart_add' product.id %}">
                {% csrf_token %}
                <div class="input-group">
                    <input type="number" name="qty" value="1" min="1" class="form-control">
                    <button class="btn btn-primary" type="submit">
                        Adicionar
                    </button>
                </div>
            </form>
            
            <form method="post" action="{% url 'buy_now' product.id %}">
                {% csrf_token %}
                <button class="btn btn-success">Comprar agora</button>
            </form>

            <a href="{% url 'product_list' %}" class="btn btn-outline-secondary">
                Voltar
            </a>
        </div>
    </div>

</div>
{% endblock %}
